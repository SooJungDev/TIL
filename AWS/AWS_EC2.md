## EC2
- 가장 먼저 생성되고 범용적인 서비스임

## 인스턴스
- 컴퓨터 한대가 인스턴스라고 볼수있음
- ex) 3개의 인스턴스 3개의 컴퓨터 사용하는 뜻과 동일

## 생성해보기
- 우분투 선택
- 제일 기본으로 선택되어있는거 선택
- 다음 인스턴스 세부 정보 구성클릭
- 다음 스토리지 추가 크기8기가로 설정뒤 태그추가로 이동
- 이름 추가하고 Name webServer 
- 보안 그룹 구성 그룹이름에 web server 입력
- HTTP 규칙 추가후 검토및 시작 클릭
- 시작클릭 새키페어 생성 awspwd입력 키페어 다운로드
- pending 은 작업중이라는 뜻 금방 running으로 바꿈
- 오른쪽 클릭 인스턴스 상태 클릭후 중단 누르면 인스턴스가 삭제됨


## EC2 인스턴스타입
MS 운영체제 SQL Server 가 있는거 비쌈
우분투 등등
- free tier 공짜로 사용할 수 있는것 그이상은 과금
- vCPUs: 가상 cpu 단위화 시켰음 
- 하고자하는 용도에 따라 다르게 설정해야함
- 유형 목적에 맞게 그룹에 표시되어있음 적합한 것에따라 설정해줘야함
## 가격정책
- 온 디맨드 인스턴스: 켜고 끄고 할 수있는 인스턴스
   - 운영체제에 따라 가격이 다름 window sql 비쌈
   -  잠깐 쓴다고하면 클라우드 컴퓨팅이 가격대비 쌈 
   - 일시 정지 시 과금이 되지 않음 
- Amazon EC2 예약 인스턴스: 구매하면 더절약해서 사용가능 
- Amazon EC2 스팟 인스턴스
  - 노는 컴퓨터가 많을때는 가격이 저렴, 노는 컴퓨터가 없을 경우 가격이 비쌀수도 있음
  - 가격이 가변적임 ex) 주식 주가처럼.. 

## EC2 인스턴스 장치설정
- 인스턴스 세부 정보 구성 클릭
- 인스턴스 개수 지정 
- 스팟 인스턴스 요청 : 스팟인스턴스 하고싶을때 체크해주거나 아니거나
- 종료 방식 : 중지(얼려놓는것), 종료(삭제) 선택 할 수 있음
- 종료 방지 기능 활성화 
- 모니터링 : 기본적으로 제공함, 훨씬더 디테일하게 저장하고 싶을때 

스토리지 추가
-  30GB 까지 무료 : 운영체제에 따라서 적합한 용량이 다름 (윈도우 기본:30GB, 리눅스 : 8GB)
-  볼륨 타입 : 프로비져닝 IOPS 가 높을수록 비싸짐 
- 종료 시 삭제 : 체크되어있을 경우 삭제, 체크가 아닐경우 종료되도 삭제되지 않음( 저장장치가 남아있을 경우 비용발생할수 있음)
  
## 태그와 보안그룹
태그 : 인스턴스가 어떤 이름인지, 관리는 누가하는지 이런 정보를 저장할수 있음
- Name : web server
- maintainer : 관리자 이름
- type: real(실서버)

보안 그룹 구성 
- 방화벽과 같은 기능 네트워크에 대한 지식이 필요함 
- 유형 : 접속하는 여러가지 방법
- SSH : 인스턴스가 리눅스라면 선택해줘야함 (원격제어방법)
 소스
   - 사용자 지정
  -  위치무관
  - 내 IP
- 웹서버를 만들 경우 HTTP 선택
  - 소스: 내IP 선택하면 나만접속하는 상황 (황당...) 위치무관을 선택해야함 
-윈도우를 선택 한 경우 RDP 포트번호 3389(원격제어)
- 인스턴스 운영체제에 따라서 원격제어 방법은 달라짐

## EC2 인스턴스 비밀번호 생성 
- Lauch 버튼 클릭 
- 비밀번호 지정을 할 수있음   
- key pair 생성 파일로 저장 비밀번호의 이름을 지정한 다음 다운로드 키페어

## OSX에서 리눅스 인스턴스로 접속 
- 인스턴스 옆에 오른쪽 클릭 connect 
- standalon ssh client 클릭 
- 터미널에 접속 
- chmod 400 aws_password.pem (400 이파일의 소유자만 파일을 읽을 수 있다는 뜻)
- 파일 오른쪽 클릭후 정보 가져오기
- 공유 및 사용권한에서 나자신 읽기전용으로 변경 staff 삭제, everyone 접근 불가로 변경
- 파일이 위치한 디렉토리에서 chmod 400 aws_password.pem 
- permission 에러나면 앞에다가 sudo
- ls -al 쳤을때 -r -------@ 읽기 접근만 있다고나옴 
- ssh -i "aws_password.pem" ubuntu@ip 주소
- 접속을 끊고 자기 컴퓨터로 오고 싶을떄 exit

## 리눅스 인스턴스에서 웹서버 사용
- sudo apt-get install apache2 (아파치 서버 설치)
- sudo rm index.html
- sudo nano index.html
- Security groups :방화벽 inbound rules 추가해줌 


## 참고사이트
  - [EC2소개](https://opentutorials.org/module/1946/11274)
  - [인스턴스 타입](https://opentutorials.org/module/1946/11275)
  - [가격 정책](https://opentutorials.org/module/1946/11276)
    - [AWS 무료 제공 대상 세부 정보](https://aws.amazon.com/ko/free/)
    - [EC2 온디맨드 가격정책](https://aws.amazon.com/ko/ec2/pricing/on-demand/)
  - [EC2 인스턴스 장치설정](https://opentutorials.org/module/1946/11277)
  - [EC2 태그와 보안그룹](https://opentutorials.org/module/1946/11278)
  - [EC2 인스턴스 비밀번호생성](https://opentutorials.org/module/1946/11279)
  - [EC2 리눅스 인스턴스 접속](https://opentutorials.org/module/1946/11281)
  