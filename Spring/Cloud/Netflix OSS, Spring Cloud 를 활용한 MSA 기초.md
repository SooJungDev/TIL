## Netflix OSS, Spring Cloud 를 활용한 MSA 기초 강의듣고 정리
## 모놀리틱 아키텍처 이해
- HA(High Avaliability)구성: 지속적으로 구동되는 시스템
- 로드 밸런서를 두고 톰캣을 여러대 두는 형태
- Load Balancer L4 switch(hardware), L7(Nginx, HAProxy)
- LB Out -> tomcat stop -> delivery -> tomcat start -> LB In

서비스가 흥해서!!!
서버 3대 추가구입
- LB설정 변경, 배포방식 변경(Jenkins, Ansible, Chef, etc..)

조직개편 상품팀, 주문팀으로 분리
- 단일 Repository 일 경우에 많은 문제가 생김
- 레파지토리를 나눠도 Share.jar 생김 공통으로 접근해야됨

- 팀별 Repository 분리, 각 코드 commit 시 팀별 배포가능
- 공통적인 부분들을 Share Repository 에 넣음
- 각 프로젝트에서 compile 'kr.co.12st:share:1.0.0-SNAPSHOT'
- **여전히 정기배포 필요**

콘웨이의 법칙
- 광범위하게 정의하면 모든 조직은 조직의 의사소통구조와 똑같은 구조를 갖는 시스템을 설계한다
- 콘웨이 법칙은 조직도에 초점을 두지 않고 실질적인 소통관계에 관심을 둔다. 너무 많은 통신관계를 갖는것은 프로젝트에 대한 진정한 위험이 된다.

모놀리틱 아키텍처 정리
- 대부분 IT회사의 시작은 모놀리틱
장점
 - 개발이 단순하다 repository 하나 체크아웃 받아서 띄우면 됨
 - 배포가 단순하다 (war 하나만 배포하면 되니까)
 - Scale-out 이 단순하다(서버 하나 복사하면 되니까)
  - 하지만 DB 성능으로 인한 한계가 있다
단점
 - 무겁다 IDE 가 못받쳐줌
 - 어플리케이션 시작이 오래걸린다
 - 기술 스택 바꾸기가 어렵다
 - 높은 결합도
 - 코드베이스의 작업한계와 소유권이 불투명
 
 ## 마이크로서비스 아키텍처 이해
 - MSA 란 시스템을 여러개의 **독립된 서비스**로 나눠서 이 **서비스를 조합**함으로서 **기능을 제공**하는 아키텍처 디자인 패턴
 
아마존의 선택
- 인터페이스로 연결시켜라 모든 커뮤니케이션은 네트워크를 통한 서비스 인터페이스로 이루어져야 한다
- 어떤 기술을 쓰든 상관없음
- 모든 서비스 인터페이스는 예외없이 외부에서 이용가능하게 되어야한다 -> aws 탄생

넷플릭스 선택
- 데이터베이스에 심각한 문제 발생 고객에게 dvd 보낼 수 업슨ㄴ 사태 
    - Scale - Up 확장만 가능한 인프라 스트럭처와 단일 장애 지점이라는 한꼐에서 벗어나길 선언
    - 그 시작 아파치 카산드라
- 2009년 aws 로 이관
    - 세가지 목표에 집중 확장성, 성능, 가용성
  
MSA 란?
- 공식적인 정의는 없음, 다음 공감대가 있을뿐
- 각 서비스간 네트워크를 통해 , 보통 HTTP 통해
- 독립된 배포단위
- 각 서비스는 쉽게 교체가능
- 각 서비스는 기능 중심으로 구성됨
- 각 서비스에 적합한 프로그래밍언어, 데이터베이스 환경으로 만들어진다
- 서비스는 크기가 작고, 상황에 따라 경계를 정하고, 자율적으로 개발되고, 독립적으로 배포되고, 분산되고 자동화 된
프로세스를 구축되고 배포된다.


## 강의
- [Netflix OSS, Spring Cloud 를 활용한 MSA 기초](https://www.youtube.com/playlist?list=PL9mhQYIlKEhdtYdxxZ6hZeb0va2Gm17A5)
